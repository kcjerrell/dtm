//! `SeaORM` Entity, @generated by sea-orm-codegen 1.1.17

use sea_orm::entity::prelude::*;
use serde::{Serialize, Deserialize};

#[derive(Clone, Debug, PartialEq, DeriveEntityModel, Serialize, Deserialize)]
#[sea_orm(table_name = "images")]
pub struct Model {
    #[sea_orm(primary_key)]
    pub id: i32,
    pub project_id: i32,
    pub node_id: i64,
    pub preview_id: i64,
    pub clip_id: i64,
    pub wall_clock: DateTimeUtc,
    pub model_id: Option<i32>,
    pub refiner_id: Option<i32>,
    #[sea_orm(column_type = "Float", nullable)]
    pub refiner_start: Option<f32>,
    pub upscaler_id: Option<i32>,
    #[sea_orm(column_type = "Text", nullable)]
    pub prompt: Option<String>,
    #[sea_orm(column_type = "Text", nullable)]
    pub negative_prompt: Option<String>,
    pub start_width: i16,
    pub start_height: i16,
    pub seed: i32,
    #[sea_orm(column_type = "Float")]
    pub strength: f32,
    pub steps: i16,
    #[sea_orm(column_type = "Float")]
    pub guidance_scale: f32,
    #[sea_orm(column_type = "Float")]
    pub shift: f32,
    #[sea_orm(num_enum)]
    pub sampler: Sampler,
    pub hires_fix: bool,
    pub tiled_decoding: bool,
    pub tiled_diffusion: bool,
    pub tea_cache: bool,
    pub cfg_zero_star: bool,
}

/// Sampler enum stored as i8 in DB, serialized as string in JSON
#[derive(Copy, Clone, Debug, PartialEq, Eq, EnumIter, DeriveActiveEnum, Serialize, Deserialize)]
#[sea_orm(rs_type = "i8", db_type = "TinyInteger")]
pub enum Sampler {
    #[sea_orm(num_value = 0)]
    #[serde(rename = "DPMPP2MKarras")]
    DPMPP2MKarras,
    #[sea_orm(num_value = 1)]
    #[serde(rename = "EulerA")]
    EulerA,
    #[sea_orm(num_value = 2)]
    #[serde(rename = "DDIM")]
    DDIM,
    #[sea_orm(num_value = 3)]
    #[serde(rename = "PLMS")]
    PLMS,
    #[sea_orm(num_value = 4)]
    #[serde(rename = "DPMPPSDEKarras")]
    DPMPPSDEKarras,
    #[sea_orm(num_value = 5)]
    #[serde(rename = "UniPC")]
    UniPC,
    #[sea_orm(num_value = 6)]
    #[serde(rename = "LCM")]
    LCM,
    #[sea_orm(num_value = 7)]
    #[serde(rename = "EulerASubstep")]
    EulerASubstep,
    #[sea_orm(num_value = 8)]
    #[serde(rename = "DPMPPSDESubstep")]
    DPMPPSDESubstep,
    #[sea_orm(num_value = 9)]
    #[serde(rename = "TCD")]
    TCD,
    #[sea_orm(num_value = 10)]
    #[serde(rename = "EulerATrailing")]
    EulerATrailing,
    #[sea_orm(num_value = 11)]
    #[serde(rename = "DPMPPSDETrailing")]
    DPMPPSDETrailing,
    #[sea_orm(num_value = 12)]
    #[serde(rename = "DPMPP2MAYS")]
    DPMPP2MAYS,
    #[sea_orm(num_value = 13)]
    #[serde(rename = "EulerAAYS")]
    EulerAAYS,
    #[sea_orm(num_value = 14)]
    #[serde(rename = "DPMPPSDEAYS")]
    DPMPPSDEAYS,
    #[sea_orm(num_value = 15)]
    #[serde(rename = "DPMPP2MTrailing")]
    DPMPP2MTrailing,
    #[sea_orm(num_value = 16)]
    #[serde(rename = "DDIMTrailing")]
    DDIMTrailing,
    #[sea_orm(num_value = 17)]
    #[serde(rename = "UniPCTrailing")]
    UniPCTrailing,
    #[sea_orm(num_value = 18)]
    #[serde(rename = "UniPCAYS")]
    UniPCAYS,
}

#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]
pub enum Relation {
    #[sea_orm(has_many = "super::image_controls::Entity")]
    ImageControls,
    #[sea_orm(has_many = "super::image_loras::Entity")]
    ImageLoras,
    #[sea_orm(
        belongs_to = "super::models::Entity",
        from = "Column::UpscalerId",
        to = "super::models::Column::Id",
        on_update = "NoAction",
        on_delete = "NoAction"
    )]
    Models3,
    #[sea_orm(
        belongs_to = "super::models::Entity",
        from = "Column::RefinerId",
        to = "super::models::Column::Id",
        on_update = "NoAction",
        on_delete = "NoAction"
    )]
    Models2,
    #[sea_orm(
        belongs_to = "super::models::Entity",
        from = "Column::ModelId",
        to = "super::models::Column::Id",
        on_update = "NoAction",
        on_delete = "NoAction"
    )]
    Models1,
    #[sea_orm(
        belongs_to = "super::projects::Entity",
        from = "Column::ProjectId",
        to = "super::projects::Column::Id",
        on_update = "NoAction",
        on_delete = "NoAction"
    )]
    Projects,
}

impl Related<super::image_controls::Entity> for Entity {
    fn to() -> RelationDef {
        Relation::ImageControls.def()
    }
}

impl Related<super::image_loras::Entity> for Entity {
    fn to() -> RelationDef {
        Relation::ImageLoras.def()
    }
}

impl Related<super::projects::Entity> for Entity {
    fn to() -> RelationDef {
        Relation::Projects.def()
    }
}

impl ActiveModelBehavior for ActiveModel {}